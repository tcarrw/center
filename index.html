<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Center Â· Illumina Notebooks</title>
<style>
body{
  margin:0;
  background:#0a0a0f;
  color:#fff;
  font-family:system-ui,sans-serif;
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  min-height:100vh;
  text-align:center;
  padding:2rem;
  transition:background 2s ease,color 2s ease;
}
h1{font-size:2.5rem;margin-bottom:.25rem;}
#ring{
  width:60vmin;height:60vmin;border:1px solid #fff2;border-radius:50%;
  margin:2rem 0;position:relative;
  transition:all 1s ease;
}
#start,#shareBtn{
  background:#222;color:#fff;border:1px solid #fff3;
  padding:0.7rem 1.4rem;border-radius:8px;cursor:pointer;
  font-size:1rem;margin:.4rem;
}
#start:hover,#shareBtn:hover{background:#444;}
a{color:#fff;text-decoration:none;}
a:hover{text-decoration:underline;}
section{margin-top:2rem;}
footer{
  opacity:.5;font-size:.75rem;margin-top:2rem;max-width:26rem;line-height:1.4;
}
.grid{
  display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));
  gap:1rem;max-width:800px;width:100%;margin-top:1rem;
}
.card{
  background:#111;padding:1rem;border-radius:10px;border:1px solid #fff2;
  font-size:.9rem;line-height:1.4;
}

/* ---------- Center Mode Themes ---------- */
body.school{background:#1a140f;color:#fffaec;font-family:"Georgia",serif;}
body.motion{background:#000812;color:#e0ffff;}
body.quietmoon{background:#0a0a1a;color:#d0d0ff;}

body.school #ring{border-color:#fffaec44;}
body.motion #ring{border-color:#0ff4;}
body.quietmoon #ring{border-color:#d0d0ff44;}

/* subtle animations */
@keyframes spin {to{transform:rotate(360deg);}}
body.motion #ring{animation:spin 30s linear infinite;}
@keyframes pulse {0%,100%{opacity:.3;}50%{opacity:1;}}
body.quietmoon #ring div{animation:pulse 6s ease-in-out infinite;}

/* ---------- Switch Map ---------- */
#switchMap{
  position:fixed;bottom:1.5rem;right:1.5rem;
  width:120px;height:120px;cursor:pointer;
}
#switchMap svg{width:100%;height:100%;opacity:.5;transition:opacity .3s;}
#switchMap:hover svg{opacity:1;}
</style>
</head>
<body>
<h1>Center Â· Illumina</h1>
<p>42 days of remembering and release.</p>

<!-- the Illumina ring -->
<div id="ring"></div>

<!-- buttons -->
<div>
  <button id="start">ğŸª¶ Start Your Notebook</button>
  <button id="shareBtn">ğŸ“£ Share to X</button>
</div>

<!-- moon logs ordered by day -->
<section>
  <h3>ğŸŒ™ Moon Logs Â· Illumina 1</h3>
  <p>
  ğŸŒ• <a href="moon/01-ignition.html">Day 1 Â· Ignition</a> Â·
  ğŸŒ— <a href="moon/14-no-babies.html">Day 14 Â· No Babies</a> Â·
  ğŸŒ– <a href="moon/28-return-of-seeds.html">Day 28 Â· Return of Seeds</a> Â·
  ğŸŒ‘ <a href="moon/42-return.html">Day 42 Â· Return</a>
  </p>
</section>

<!-- community constellation -->
<section id="community">
  <h3>âœ¨ Community Constellation</h3>
  <p>These are public notebooks orbiting this cycle.</p>
  <div class="grid" id="grid">
    <div class="card">ğŸŒ• <b>@suna</b><br><em>â€œIgnition felt like glitter physics.â€</em><br><a href="#">View notebook â†’</a></div>
    <div class="card">ğŸŒ— <b>@beeofwords</b><br><em>â€œUnionized my emotions.â€</em><br><a href="#">View notebook â†’</a></div>
    <div class="card">ğŸŒ– <b>@compostdreams</b><br><em>â€œReturn of Seeds was an outfit.â€</em><br><a href="#">View notebook â†’</a></div>
  </div>
</section>

<footer>
Time drifts here by Illumina rhythm â€” forty-two days of remembering and release.<br>
No accounts, no data; only light, motion, and what you write.
</footer>

<!-- Switch Map Triangle -->
<div id="switchMap" title="Switch Center Mode">
  <svg viewBox="0 0 200 200">
    <polygon points="100,10 10,190 190,190" fill="none" stroke="#fff" stroke-width="1"/>
    <text x="95" y="30" font-size="22" text-anchor="middle">ğŸª¶</text>
    <text x="45" y="180" font-size="22" text-anchor="middle">ğŸŒ™</text>
    <text x="155" y="180" font-size="22" text-anchor="middle">ğŸŒ€</text>
  </svg>
</div>

<script>
/* ---------- Illumina ring ---------- */
const ring=document.getElementById('ring');
for(let i=0;i<42;i++){
  const d=document.createElement('div');
  d.style.position='absolute';
  d.style.width='8px';d.style.height='8px';
  d.style.borderRadius='50%';d.style.background='#fff2';
  const a=(i/42)*2*Math.PI;const r=28;
  d.style.transform=`translate(${Math.sin(a)*r}vmin,${-Math.cos(a)*r}vmin)`;
  ring.appendChild(d);
}

/* ---------- helpers ---------- */
function moonEmoji(p){const pool=["ğŸŒ‘","ğŸŒ’","ğŸŒ“","ğŸŒ”","ğŸŒ•","ğŸŒ–","ğŸŒ—","ğŸŒ˜"];
  return pool[Math.floor((p*8)%8)];}
function illuminaState(){
  const start=new Date("2025-11-05T00:00:00Z");
  const now=new Date();const d=(now-start)/86400000;
  const day=Math.floor(d%42)+1;const phase=(d%42)/42;
  return {day,phase};
}

/* ---------- notebook download ---------- */
document.getElementById('start').onclick=()=>{
  fetch('notebooks/template.html')
    .then(r=>r.text())
    .then(t=>{
      const blob=new Blob([t],{type:'text/html'});
      const url=URL.createObjectURL(blob);
      const a=document.createElement('a');
      a.href=url;a.download='illumina-notebook.html';a.click();
    });
};

/* ---------- share to X ---------- */
document.getElementById('shareBtn').onclick=()=>{
  const {day,phase}=illuminaState();
  const text=`${moonEmoji(phase)} Illumina 1 Â· Day ${day}/42 â€” writing under the same moon at https://center.plnt.earth`;
  const url=`https://twitter.com/intent/tweet?text=${encodeURIComponent(text)}`;
  window.open(url,'_blank');
};

/* ---------- highlight current day ---------- */
const dots=[...ring.children];
setInterval(()=>{
  const {day}=illuminaState();
  dots.forEach((d,i)=>{d.style.background=i+1===day?'#fff':'#fff2';});
},60000);

/* ---------- Center Mode Logic ---------- */
function applyMode(mode){
  document.body.className=mode;
  localStorage.kendylKey=mode;
}
function currentMode(){
  return localStorage.kendylKey||"default";
}
applyMode(currentMode());

/* ---------- Switch Map Interaction ---------- */
document.getElementById('switchMap').onclick=e=>{
  const {offsetX:x,offsetY:y}=e;
  const cx=100,cy=190;
  const dx=x-cx,dy=y-cy;
  const angle=Math.atan2(dy,dx);
  if(y<80) applyMode('school');         // top
  else if(x<100) applyMode('quietmoon'); // left
  else applyMode('motion');              // right
};
</script>
</body>
</html>
